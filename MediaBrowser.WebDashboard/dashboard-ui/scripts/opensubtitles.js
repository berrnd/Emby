define(["loading","fnchecked","emby-linkbutton","emby-input","emby-checkbox","emby-button"],function(loading){"use strict";function loadPage(page,config){page.querySelector("#txtOpenSubtitleUsername").value=config.OpenSubtitlesUsername,page.querySelector("#txtOpenSubtitlePassword").value=config.OpenSubtitlesPasswordHash||"",loading.hide()}function onSubmit(e){e.preventDefault(),loading.show();var form=this;return ApiClient.getNamedConfiguration("subtitles").then(function(config){config.OpenSubtitlesUsername=form.querySelector("#txtOpenSubtitleUsername").value;var newPassword=form.querySelector("#txtOpenSubtitlePassword").value;newPassword&&(config.OpenSubtitlesPasswordHash=newPassword),ApiClient.updateNamedConfiguration("subtitles",config).then(Dashboard.processServerConfigurationUpdateResult)}),!1}return function(view,params){view.querySelector("form").addEventListener("submit",onSubmit),view.addEventListener("viewshow",function(){loading.show();var page=this;ApiClient.getNamedConfiguration("subtitles").then(function(response){loadPage(page,response)})})}});