<div id="indexPage" style="outline: none;" data-role="page" data-dom-cache="true" class="page homePage libraryPage allLibraryPage backdropPage pageWithAbsoluteTabs" data-title="${ButtonHome}" data-backdroptype="movie,series,game,book">

    <div class="libraryViewNav">
        <button class="pageTabButton is-active" data-index="0">${TabHome}</button>
        <!--myproduction-change-start-->
		<!--Hided button-->
        <button class="pageTabButton hide" data-index="1">${TabNextUp}</button>
		<!--myproduction-change-end-->
        <button class="pageTabButton homeFavoritesTab" data-index="2">${TabFavorites}</button>
		<!--myproduction-change-start-->
		<!--Hided button-->
        <button class="pageTabButton hide" data-index="3">${TabUpcoming}</button>
		<!--myproduction-change-end-->
    </div>
    <div class="is-active pageTabContent ehsContent" id="homeTab" data-index="0">
        <div class="ui-bar-b readOnlyContent welcomeMessage hide" style="padding: 2em; border-radius: 10px; margin: 2em auto; font-weight: normal;">
            <h1 style="margin-top: 0;" class="tourHeader"></h1>
            <p>
                <button is="emby-button" type="button" class="raised submit block btnTakeTour"><span class="tourButtonText"></span></button>
            </p>
        </div>
		
		<!--myproduction-change-start-->
		<!--Added statistics overview-->
		<div class="homePageSection" style="display: inline-block; vertical-align: top; margin-right: 15px;">
			<h1 class="listHeader">Statistik</h1>
			<div>
				<h2 id="statisticsSectionMediaSummary" class="hide" style="display: inline;">Aktuell sind <span id="statisticsMovieCount" style="color: #F16834;"></span> Filme und <span id="statisticsSeriesCount" style="color: #F16834;"></span> Serien mit insgesamt <span id="statisticsEpisodesCount" style="color: #F16834;"></span> Episoden verfügbar</h2>
        <p style="line-height: 5px; font-size: 5px;"></p>
				<h2 id="statisticsSectionMediaSummaryData" class="hide" style="display: inline;">Das entspricht einer Datenmenge von <span id="statisticsTotalFileSize" style="color: #F16834;"></span><br>bzw. einer gesamten Spieldauer von <span id="statisticsTotalRunTime" style="color: #F16834;"></span></h2>
        <p style="line-height: 5px; font-size: 5px;"></p>
				<h2 id="statisticsSectionNewestItem" class="hide" style="display: inline;">Neue Medieninhalte wurden zuletzt am <span id="statisticsNewestItemDate" style="color: #F16834;"></span> hinzugefügt</h2>
			</div>
		</div>
		<script>
			ApiClient.getItemCounts().then(function (itemCounts)
			{
				document.getElementById("statisticsMovieCount").textContent = itemCounts.MovieCount;
				document.getElementById("statisticsSeriesCount").textContent = itemCounts.SeriesCount;
				document.getElementById("statisticsEpisodesCount").textContent = itemCounts.EpisodeCount;
				document.getElementById("statisticsSectionMediaSummary").classList.remove("hide");
				
				document.getElementById("statisticsTotalRunTime").textContent = germanDuration(itemCounts.TotalRunTimeTicks);
				document.getElementById("statisticsTotalFileSize").textContent = "TODO_ADD_TOTAL_FILE_SIZE";
				document.getElementById("statisticsSectionMediaSummaryData").classList.remove("hide");

				document.getElementById("statisticsNewestItemDate").textContent = germanDate(new Date(itemCounts.NewestItemDate));
				document.getElementById("statisticsSectionNewestItem").classList.remove("hide");
			});
			
			function germanDate(dateObject)
			{
				return ("0" + dateObject.getDate().toString()).substr(-2) + "." + ("0" + dateObject.getMonth().toString()).substr(-2) + "." + dateObject.getFullYear().toString();
			}
			
			function germanTime(dateObject)
			{
				return ("0" + dateObject.getHours().toString()).substr(-2) + ":" + ("0" + dateObject.getMinutes().toString()).substr(-2);
			}
			
			function germanDuration(ticks)
			{
				var totalSeconds = ticks / 1000 / 1000;
				var years = Math.floor(totalSeconds / 31536000);
				var days = Math.floor((totalSeconds % 31536000) / 86400);
				var hours = Math.floor(((totalSeconds % 31536000) % 86400) / 3600);
				//var minutes = Math.floor((((totalSeconds % 31536000) % 86400) % 3600) / 60);
				
				var yearTxt = "Jahren";
				if (years == 1)
				{
					yearTxt = "Jahr";
				}
				
				var dayTxt = "Tagen";
				if (days == 1)
				{
					dayTxt = "Tag";
				}
				
				var hourTxt = "Stunden";
				if (hours == 1)
				{
					hourTxt = "Stunde";
				}
				
				//var minuteTxt = "Minuten";
				//if (minutes == 1)
				//{
				//	hourTxt = "Minute";
				//}
				
				return years.toString() + " " + yearTxt + ", " + days.toString() + " " + dayTxt + ", " + hours.toString() + " " + hourTxt + "";
			}
		</script>
		<!--myproduction-change-end-->
		
		<!--myproduction-change-start-->
		<!--Added wish button-->
		<div class="homePageSection" style="display: inline-block; float: right;">
			<h1 class="listHeader">Wunschecke</h1>
			<p>Eine Serie ist unvollständig, du hättest gerne was Neues oder irgendwas geht nicht?</p>
			<p><button is="emby-button" type="button" class="raised" onclick="WuenschDirWas();"><i class="md-icon">add_shopping_cart</i><span>Ich wünsch mir was</span></button></p>
		</div>
		<script>
			function WuenschDirWas()
			{
				var wunsch = prompt("Was hättest denn gern?");
				if (wunsch != null)
				{
					Dashboard.showLoadingMsg();
					ApiClient.getCurrentUser().then(function (user)
					{
						var piwikTracker = Piwik.getAsyncTracker();
						piwikTracker.trackEvent("Misc", "Wish", wunsch);
						
						ApiClient.ajax(
						{
							url: "https://bots.berrnd.org/actions/mail?from=emby@berrnd.org&subject=Neuer Wunsch von " + user.Name + "&text=" + wunsch,
							type: 'GET'
						}).then(function (result) {
							if (result.indexOf("success") > -1)
							{
								Dashboard.alert({
									title: "Dein Wunsch ist mir Befehl",
									message: "Schau immer mal wieder hier vorbei, es ist sicher schon bald da."
								});
							}
							else
							{
								Dashboard.alert({
									title: "Da ging leider etwas schief",
									message: "Bitte versuche es nochmal, oder lass mir deinen Wunsch auf einem anderem Weg zukommen."
								});
							}
							Dashboard.hideLoadingMsg();
						});
					});
				}
			}
		</script>
		<!--myproduction-change-end-->
		
        <div class="sections"></div>
    </div>
    <div class="pageTabContent ehsContent" id="nextUpTab" data-index="1">
        <div class="homePageSection">
            <div>
                <h1 class="listHeader nextUpHeader" style="display: inline-block; vertical-align: middle;">${HeaderNextUp}</h1>
                <button is="emby-button" type="button" class="raised submit mini categorySyncButton" data-category="NextUp">
                    <i class="md-icon">sync</i>
                    <span>${ButtonSync}</span>
                </button>
            </div>
            <div id="nextUpItems" class="itemsContainer">
            </div>
        </div>
        <p class="noNextUpItems hide">${NoNextUpItemsMessage}</p>
    </div>
    <div class="pageTabContent ehsContent" id="favoritesTab" data-index="2">
        <div class="favoriteSections"></div>
    </div>
    <div class="pageTabContent ehsContent" id="upcomingTab" data-index="3">
        <div id="upcomingItems">
        </div>
        <div class="noItemsMessage hide">
            <p>${MessageNothingHere}</p>
            <p>
                <a href="metadata.html">${MessagePleaseEnsureInternetMetadata}</a>
            </p>
        </div>

    </div>

    <div data-role="content">

    </div>
</div>
